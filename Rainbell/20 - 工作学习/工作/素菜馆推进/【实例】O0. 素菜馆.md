---
target: tasks
status: å…¨åŠ›å†²åˆº
tags: project/open
color: "#5cedeb"
---

## ä¸»çº¿ä»»åŠ¡
**2023å¹´05æœˆ26æ—¥ 09:49**
- [x] å‘å¸ƒæ‹›è˜ä¿¡æ¯ â³ 2023-05-23
- [x] é¢è¯•åº—é•¿ ðŸ›« 2023-05-27 ðŸ“… 2023-05-28
- [x] ç¡®å®šåº—é•¿äººé€‰ ðŸ“… 2023-06-01 
- [x] å’Œåº—é•¿ä¸€èµ·å®Œæˆé¦–æœˆè§„åˆ’ ðŸ“… 2023-06-07
- [-] æ‹›è˜å®Œæ¡†æž¶å›¢é˜Ÿ ðŸ“… 2023-06-20 
- [-] å®Œæˆå…¨ä½“äººå‘˜åŸ¹è®­ ðŸ“… 2023-07-04 
- [-] ã€æš‚æŽ¨è¿Ÿå¾…äºŒæ¶ˆå®Œæˆã€‘æ–°åº—å¼€ä¸š
- [-] ã€èµžæŽ¨è¿Ÿã€‘å®Œå–„ç´ èœé¦†wiki

## æ”¯çº¿ä»»åŠ¡
- [x] è®¾è®¡æœˆé¥¼ ðŸ“… 2023-07-18
- [ ] é—¨ç‰Œè£…ä¿®
- [x] å®¤å†…å¸ƒç½® ðŸ“… 2023-07-20
- [x] è®¾å®šè¯¦å°½ä¸šåŠ¡è®¡åˆ’ï¼ˆç›®æ ‡å¸‚åœºï¼Œå®šä»·ç­–ç•¥ï¼Œè¥é”€ç­–ç•¥ï¼‰ ðŸ“… 2023-06-07
- [ ] èœå•æ ¸å¯¹å’Œè®¾è®¡
- [ ] ç¡®ä¿ä¾›åº”é“¾å¯é 
- [ ] è¥é”€å’Œå®£ä¼ 
- [ ] è´¢åŠ¡ç®¡ç†ï¼ˆè®¾ç½®é€‚å½“çš„é¢„ç®—ï¼Œå¹¶ç›‘æŽ§æ”¶å…¥å’Œæ”¯å‡ºï¼Œç¡®ä¿è´¢åŠ¡å¥åº·ï¼‰
- [ ] è®¾è®¡èœè°±æ›´æ–°

## ä¼šè®®è®°å½•

### é¦–æœˆå†²åˆºä¼šè®®

- [x] é¦–æœˆå†²åˆºè®¡åˆ’ä¼šè®® â³ 2023-05-30 

==äººå‘˜åŠ¨å‘˜å’Œæ¿€åŠ±==

==è®¡åˆ’è®¨è®ºå†…å®¹==

==è®¡åˆ’è¾“å‡ºç»“æžœ==

==è¾“å‡ºç»“æžœ==

## å·¥ä½œè®°å½•



```dataviewjs
// 1. å®šä¹‰æ–‡ä»¶å¤¹è·¯å¾„å’Œå¼€å§‹ç»“æŸå­—ç¬¦ä¸²
let diaryFolderPath = "00 - æ¯æ—¥æ—¥è®°";
let startStr = "**ç´ é£Ÿåº—**"; 
// å®šä¹‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ '**xxx**' æˆ– '# XX' å¼€å¤´çš„è¡Œ
let endPattern = /^(#+ .+|\*\*.+\*\*)/; 

// 2. èŽ·å–åŒ…å« diaryFolderPath çš„æ‰€æœ‰ markdown æ–‡ä»¶
const diaryFiles = app.vault.getMarkdownFiles().filter(file => file.path.includes(diaryFolderPath));

// 3. éåŽ†æ‰€æœ‰æ—¥è®°æ–‡ä»¶ï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶å†…å®¹è¿›è¡Œå¤„ç†
let diaryContentPromises = diaryFiles.map(file => {
  // ä½¿ç”¨å¼‚æ­¥æ“ä½œè¯»å–æ–‡ä»¶å†…å®¹
  return app.vault.cachedRead(file).then(content => {
    // åˆ†å‰²å†…å®¹ä¸ºå•ç‹¬çš„è¡Œ
    let lines = content.split("\n");
    let summary = "";
    let capture = false;

    // 4. éåŽ†æ‰€æœ‰è¡Œ
    lines.forEach(line => {
      if (line.startsWith(startStr)) {
        // å¦‚æžœè¡Œä»¥ startStr å¼€å¤´ï¼Œåˆ™å¼€å§‹æ•èŽ·
        capture = true;
      } else if (endPattern.test(line)) { 
        // å¦‚æžœè¡Œæ»¡è¶³ endPatternï¼Œé‚£ä¹ˆç»“æŸæ•èŽ·
        capture = false;
      } else if (capture && !line.startsWith(startStr)) { 
        // å¦‚æžœå¤„äºŽæ•èŽ·çŠ¶æ€ä¸”è¡Œä¸ä»¥ startStr å¼€å¤´ï¼Œåˆ™å°†è¡Œæ·»åŠ åˆ° summary
        summary += line + "\n";
      }
    });

    // 5. æ¸…é™¤ summary çš„å‰åŽç©ºç™½
    summary = summary.trim();
    let date = file.basename;

    // 6. ä½¿ç”¨ moment.js æ ¼å¼åŒ–æ—¥æœŸï¼Œå°† 'YYYYå¹´MMæœˆDDæ—¥' è½¬æ¢ä¸º 'MæœˆDæ—¥'
    date = moment(date, 'YYYYå¹´MMæœˆDDæ—¥').format('MæœˆDæ—¥');

    // 7. å¦‚æžœæ‰¾åˆ°äº†æ€»ç»“ï¼Œè¿”å›žæ—¥æœŸå’Œæ€»ç»“
    if (summary) {
      return [date, summary];
    }
  });
});

// 8. ç­‰å¾…æ‰€æœ‰æ–‡ä»¶å†…å®¹å¤„ç†å®Œæˆ
Promise.all(diaryContentPromises).then(diaryContents => {
  // è¿‡æ»¤å‡ºå®šä¹‰äº†æ€»ç»“çš„æ–‡ä»¶å†…å®¹
  const validContents = diaryContents.filter(content => content !== undefined);
  // åœ¨ Dataview è¡¨æ ¼ä¸­æ˜¾ç¤ºç»“æžœ
  dv.table(["æ—¥æœŸ", "æ€»ç»“"], validContents);
});

```


